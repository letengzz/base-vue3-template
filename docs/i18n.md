# 国际化 (i18n)

## 概述

本项目使用 Vue I18n 11 作为国际化解决方案，支持多语言切换，包括中文（zh-CN）和英文（en-US）两种语言。配置文件位于 src/i18n 目录下。

## 目录结构

```
src/i18n/
├── index.ts          # i18n 实例创建和配置
└── locales/
    ├── zh-CN.ts      # 中文语言包
    └── en-US.ts      # 英文语言包
```

## 配置说明

### 初始化 i18n

```typescript
// src/i18n/index.ts
import type { App } from 'vue'
import { createI18n } from 'vue-i18n'
import zhCN from './locales/zh-CN'
import enUS from './locales/en-US'

const i18n = createI18n({
  legacy: false,              // 使用 Composition API
  locale: 'zh-CN',            // 默认语言
  fallbackLocale: 'zh-CN',    // 回退语言
  messages: {
    'zh-CN': zhCN,
    'en-US': enUS,
  },
})

export const useI18n = (app: App) => {
  app.use(i18n)
}
```

### 在应用入口注册

```typescript
// src/main.ts
import { createApp } from 'vue'
import App from './App.vue'
import { useI18n } from './i18n'

const app = createApp(App)
useI18n(app)
app.mount('#app')
```

## 语言包结构

### 中文语言包

```typescript
// src/i18n/locales/zh-CN.ts
export default {
  common: {
    hello: '你好',
    welcome: '欢迎，{name}!',
  },
  home: {
    title: '欢迎使用 Vue3 通用模板',
    description: '这是一个功能完善、易于扩展的 Vue3 通用模板项目',
  },
}
```

### 英文语言包

```typescript
// src/i18n/locales/en-US.ts
export default {
  common: {
    welcome: 'Welcome, {name}!',
  },
  home: {
    title: 'Welcome to Vue3 Common Template',
    description: 'This is a feature-rich, easy-to-extend Vue3 common template project',
  },
}
```

## 在模板中使用

### 基本用法

在模板中使用 `$t` 函数进行国际化：

```vue
<template>
  <div class="home">
    <h1>{{ $t('home.title') }}</h1>
    <p>{{ $t('home.description') }}</p>
    <p>{{ $t('common.hello') }}</p>
  </div>
</template>
```

### 带参数的消息

使用占位符传递参数：

```vue
<template>
  <div>
    <!-- 输出: 欢迎，张三! -->
    <p>{{ $t('common.welcome', { name: '张三' }) }}</p>
  </div>
</template>
```

### 在 v-bind 中使用

```vue
<template>
  <input :placeholder="$t('form.username')" />
  <button :title="$t('button.submit')">提交</button>
</template>
```

## 在脚本中使用

### 使用 useI18n 组合式函数

```vue
<script setup lang="ts">
import { useI18n } from 'vue-i18n'

const { t } = useI18n()

// 翻译单个键
const title = t('home.title')

// 带参数的翻译
const welcome = t('common.welcome', { name: '张三' })

// 使用计算属性
import { computed } from 'vue'
const greeting = computed(() => t('common.hello'))
</script>
```

### 完整示例组件

```vue
<template>
  <div class="i18n-demo">
    <h2>{{ $t('home.title') }}</h2>
    <p>{{ $t('home.description') }}</p>
    <p>{{ welcomeMessage }}</p>
    <button @click="switchLanguage">切换语言</button>
  </div>
</template>

<script setup lang="ts">
import { useI18n } from 'vue-i18n'
import { computed } from 'vue'

const { t, locale } = useI18n()

const welcomeMessage = computed(() => {
  return t('common.welcome', { name: 'Vue3' })
})

const switchLanguage = () => {
  locale.value = locale.value === 'zh-CN' ? 'en-US' : 'zh-CN'
}
</script>
```

## 切换语言

### 基本用法

```typescript
import { useI18n } from 'vue-i18n'

const { locale } = useI18n()

// 切换到中文
locale.value = 'zh-CN'

// 切换到英文
locale.value = 'en-US'
```

### 语言切换组件

```vue
<template>
  <div class="language-switcher">
    <button 
      :class="{ active: locale === 'zh-CN' }" 
      @click="locale = 'zh-CN'"
    >
      中文
    </button>
    <button 
      :class="{ active: locale === 'en-US' }" 
      @click="locale = 'en-US'"
    >
      English
    </button>
  </div>
</template>

<script setup lang="ts">
import { useI18n } from 'vue-i18n'

const { locale } = useI18n()
</script>

<style scoped>
.language-switcher button {
  margin: 0 5px;
  padding: 5px 10px;
}

.language-switcher button.active {
  background-color: #42b883;
  color: white;
}
</style>
```

## 添加新语言

### 1. 创建语言文件

在 `src/i18n/locales/` 目录下创建新的语言文件，例如日语：

```typescript
// src/i18n/locales/ja-JP.ts
export default {
  common: {
    hello: 'こんにちは',
    welcome: 'ようこそ、{name}!',
  },
  home: {
    title: 'Vue3 共通テンプレートへようこそ',
    description: 'これは機能が豊富で拡張しやすい Vue3 共通テンプレートプロジェクトです',
  },
}
```

### 2. 注册新语言

在 `src/i18n/index.ts` 中注册新语言：

```typescript
// src/i18n/index.ts
import type { App } from 'vue'
import { createI18n } from 'vue-i18n'
import zhCN from './locales/zh-CN'
import enUS from './locales/en-US'
import jaJP from './locales/ja-JP'  // 导入新语言包

const i18n = createI18n({
  legacy: false,
  locale: 'zh-CN',
  fallbackLocale: 'zh-CN',
  messages: {
    'zh-CN': zhCN,
    'en-US': enUS,
    'ja-JP': jaJP,  // 添加到 messages 对象
  },
})

export const useI18n = (app: App) => {
  app.use(i18n)
}
```

## 添加新翻译键

### 1. 在所有语言包中添加

```typescript
// src/i18n/locales/zh-CN.ts
export default {
  common: {
    hello: '你好',
    welcome: '欢迎，{name}!',
  },
  home: {
    title: '欢迎使用 Vue3 通用模板',
    description: '这是一个功能完善、易于扩展的 Vue3 通用模板项目',
  },
  // 新增表单相关翻译
  form: {
    username: '用户名',
    password: '密码',
    submit: '提交',
    cancel: '取消',
    reset: '重置',
  },
  // 新增按钮相关翻译
  button: {
    save: '保存',
    edit: '编辑',
    delete: '删除',
    add: '添加',
    search: '搜索',
  },
}
```

```typescript
// src/i18n/locales/en-US.ts
export default {
  common: {
    welcome: 'Welcome, {name}!',
  },
  home: {
    title: 'Welcome to Vue3 Common Template',
    description: 'This is a feature-rich, easy-to-extend Vue3 common template project',
  },
  // New form translations
  form: {
    username: 'Username',
    password: 'Password',
    submit: 'Submit',
    cancel: 'Cancel',
    reset: 'Reset',
  },
  // New button translations
  button: {
    save: 'Save',
    edit: 'Edit',
    delete: 'Delete',
    add: 'Add',
    search: 'Search',
  },
}
```

### 2. 在组件中使用

```vue
<template>
  <form>
    <div>
      <label>{{ $t('form.username') }}</label>
      <input type="text" :placeholder="$t('form.username')" />
    </div>
    <div>
      <label>{{ $t('form.password') }}</label>
      <input type="password" :placeholder="$t('form.password')" />
    </div>
    <button type="submit">{{ $t('form.submit') }}</button>
    <button type="button">{{ $t('button.cancel') }}</button>
  </form>
</template>
```

## 复数形式

Vue I18n 支持复数形式：

```typescript
// 语言包中使用复数
export default {
  cart: {
    item: '{count, plural, =0 {没有商品} =1 {1个商品} other {{count}个商品}}',
  },
}
```

```vue
<template>
  <!-- 输出: 5个商品 -->
  <p>{{ $t('cart.item', { count: 5 }) }}</p>
  
  <!-- 输出: 1个商品 -->
  <p>{{ $t('cart.item', { count: 1 }) }}</p>
  
  <!-- 输出: 没有商品 -->
  <p>{{ $t('cart.item', { count: 0 }) }}</p>
</template>
```

## 命名空间

对于大型项目，可以使用命名空间组织翻译：

```typescript
// src/i18n/locales/zh-CN.ts
export default {
  common: {
    // 通用翻译
  },
  home: {
    // 首页翻译
  },
  admin: {
    // 管理后台翻译
    users: {
      title: '用户管理',
      add: '添加用户',
      edit: '编辑用户',
      delete: '删除用户',
    },
  },
  user: {
    // 用户相关翻译
    profile: {
      title: '个人资料',
      name: '姓名',
      email: '邮箱',
    },
  },
}
```

```vue
<template>
  <!-- 使用命名空间 -->
  <h1>{{ $t('admin.users.title') }}</h1>
  <button>{{ $t('admin.users.add') }}</button>
  <h1>{{ $t('user.profile.title') }}</h1>
</template>
```

## 最佳实践

### 1. 统一组织语言包

```typescript
// 推荐：按模块组织
export default {
  // 全局通用
  common: {
    confirm: '确定',
    cancel: '取消',
    submit: '提交',
  },
  // 首页
  home: {...},
  // 用户模块
  user: {...},
  // 设置模块
  settings: {...},
}
```

### 2. 使用占位符而非字符串拼接

```vue
<!-- 推荐 -->
<p>{{ $t('welcome.message', { name: userName }) }}</p>

<!-- 不推荐 -->
<p>{{ $t('welcome.message') + ' ' + userName }}</p>
```

### 3. 保持键名一致性

```typescript
// 推荐：使用 camelCase
export default {
  form: {
    username: '用户名',
    password: '密码',
  },
}

// 不推荐：使用 kebab-case
export default {
  'form-username': '用户名',
  'form-password': '密码',
}
```

### 4. 使用辅助函数简化调用

```typescript
// src/utils/i18n.ts
import { useI18n } from 'vue-i18n'

export function t(key: string) {
  const { t } = useI18n()
  return t(key)
}

// 在组件中使用
import { t } from '@/utils/i18n'
const title = t('home.title')
```
